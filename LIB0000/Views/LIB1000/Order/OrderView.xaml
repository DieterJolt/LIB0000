<Page x:Class="LIB0000.OrderView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      DataContext = "{Binding RelativeSource={RelativeSource Self}}"
      xmlns:local="clr-namespace:LIB0000"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="OrderView" IsVisibleChanged="Page_IsVisibleChanged" >

    <Grid x:Name="gridMain" Margin="20">

        <Grid.RowDefinitions>
            <RowDefinition Height="12*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Vertical" Margin="10" Grid.Row="0">
            <local:TextInputTextUserControl 
                    TextLeft="{DynamicResource OrderNr}"
                    Input="{Binding BasicService.OrdersService.Order.Edit.OrderNr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    TextRight=""/>
            <local:TextInputButtonUserControl
                    TextLeft="{DynamicResource ProductGroep}"
                    CommandRight="{Binding cmdSelectProductGroupCommand}"
                    TextRight=""
                    ImageRight="pack://application:,,,/Assets/Images/ProductGroups.png"
                    VisibilityRight="True">

                <local:TextInputButtonUserControl.Input>
                    <MultiBinding Converter="{StaticResource ProductGroupIdToNameMultiConverter}" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                        <Binding Path="BasicService.OrdersService.Order.Edit.ProductGroupId" />
                        <Binding Path="BasicService.ProductGroupsService.ProductGroup.List" />
                    </MultiBinding>
                </local:TextInputButtonUserControl.Input>

            </local:TextInputButtonUserControl>
            <local:TextInputButtonUserControl
                    TextLeft="{DynamicResource Product}"
                    CommandRight="{Binding cmdSelectProductCommand}"
                    TextRight=""
                    ImageRight="pack://application:,,,/Assets/Images/Products.png"
                    VisibilityRight="True">

                <local:TextInputButtonUserControl.Input>
                    <MultiBinding Converter="{StaticResource ProductIdToNameMultiConverter}" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged">
                        <Binding Path="BasicService.OrdersService.Order.Edit.ProductId" />
                        <Binding Path="BasicService.ProductsService.Product.List" />
                    </MultiBinding>
                </local:TextInputButtonUserControl.Input>

            </local:TextInputButtonUserControl>
            <local:TextNumberTextUserControl
                    TextLeft="{DynamicResource Aantal}"
                    Input="{Binding BasicService.OrdersService.Order.Loaded.Amount, Mode=TwoWay}"
                    TextRight=""/>

        </StackPanel>


        <local:Footer5ButtonsUserControl VerticalAlignment="Center" Grid.Row="1"
                    
                    Button1Text="Start order"
                    Button1Image="pack://application:,,,/Assets/Images/Yes.png"
                    Button1Visibility="{Binding BasicService.OrdersService.Order.IsOrderBusy, Converter={StaticResource ConverterBoolToInverseBool}}"
                    Button1Command="{Binding cmdSaveOrderCommand}"          
                                           
                    Button2Text="Close order"
                    Button2Image="pack://application:,,,/Assets/Images/Delete.png"
                    Button2Visibility="{Binding BasicService.OrdersService.Order.IsOrderBusy}"
                    Button2Command="{Binding cmdEndOrderCommand}"   
                                         
                    Button3Text="Start/Stop machine"
                    Button3Image="pack://application:,,,/Assets/Images/Yes.png"
                    Button3Visibility="{Binding BasicService.OrdersService.Order.IsOrderBusy}"
                    Button3Command="{Binding cmdStartStopMachineCommand}"   

          />



    </Grid>

</Page>
