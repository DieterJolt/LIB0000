<ui:FluentWindow
    x:Class="LIB0000.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:LIB0000"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    DataContext = "{Binding RelativeSource={RelativeSource Self}}"   
    Title="{Binding ViewModel.ApplicationTitle, Mode=OneWay}"
    WindowState="Maximized"
    

    d:DesignHeight="450"
    d:DesignWidth="800"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica"
    WindowCornerPreference="Round"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d" 
    Closing="EventClosingWindow">

    <Grid x:Name="gridMain">
        <Grid.RowDefinitions>
            <RowDefinition Height="12*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="270*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="gridTitleBar" Grid.Row="0" >
            <ui:TitleBar 
            x:Name="TitleBar"
            Title="{Binding ViewModel.ApplicationTitle}" 
            ShowMaximize="True"
            CloseWindowByDoubleClickOnIcon="True">
                <!--<ui:TitleBar.Icon>
                    <ui:ImageIcon Source="pack://application:,,,/Assets/Images/LogoJoltIcon.png" VerticalAlignment="Center"/>
                </ui:TitleBar.Icon>-->
            </ui:TitleBar>

        </Grid>

        <Grid x:Name="gridHeader" Grid.Row="1" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid x:Name="gridHeaderLeft" Grid.Column="0" Margin="10" >
                <Button Visibility="{Binding BasicService.MessagesService.ActualMessage.ListEmpty, Converter={StaticResource ConverterBoolToVisibility0Visible1Hidden}}"   HorizontalContentAlignment="Left"
                    HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                    Background="{Binding BasicService.MessagesService.ActualMessage.StatusHeader.Type,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource ConverterMessageTypeToBackgroundColor}}"
                    Foreground="{Binding BasicService.MessagesService.ActualMessage.StatusHeader.Type,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource ConverterMessageTypeToForegroundColor}}">
                    <Grid >

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>


                        <TextBlock  Grid.Row="0"
                                   Text="{Binding BasicService.MessagesService.ActualMessage.StatusHeader.Type,Converter={StaticResource ConverterMessageTypeToString}}" 
                                   FontSize="{DynamicResource SmallTitleFontSize}"  
                                   HorizontalAlignment="Left" VerticalAlignment="Center"/>
                        <TextBlock  Grid.Row="1"  
                                    FontSize="{DynamicResource LargeFontSize}"  
                                    HorizontalAlignment="Left" >
                            <Run Text="{Binding BasicService.MessagesService.ActualMessage.StatusHeader.Group,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                            <Run Text=""/>
                            <Run Text="{Binding BasicService.MessagesService.ActualMessage.StatusHeader.Nr,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                            <Run Text=":"></Run>
                            <Run Text="{Binding BasicService.MessagesService.ActualMessage.StatusHeader.MessageText,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                        </TextBlock>
                    </Grid>


                </Button>

                <Button Visibility="{Binding BasicService.MessagesService.ActualMessage.ListEmpty, Converter={StaticResource ConverterBoolToVisibility1Visible0Hidden}}"   HorizontalContentAlignment="Left"
                    HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                    Background="{Binding BasicService.MessagesService.StepMessage.StepStatus,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource ConverterMessageTypeToBackgroundColor}}"
                    Foreground="{Binding BasicService.MessagesService.StepMessage.StepStatus,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource ConverterMessageTypeToForegroundColor}}">
                    <Grid >

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>


                            <TextBlock Grid.Row="0"
                                   Text="{Binding BasicService.MessagesService.StepMessage.StepStatus,Converter={StaticResource ConverterMessageTypeToString}}"  
                                   FontSize="{DynamicResource SmallTitleFontSize}"  
                                   HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock Grid.Row="1"  
                                    FontSize="{DynamicResource LargeFontSize}"  
                                    HorizontalAlignment="Left">
                            <Run Text="{Binding BasicService.MessagesService.StepMessage.ActiveStep.Group,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                            <Run Text=""/>
                            <Run Text=""/>
                            <Run Text=":"></Run>
                            <Run Text="{Binding BasicService.MessagesService.StepMessage.ActiveStep.Status,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>
                            </TextBlock>
             
                    </Grid>


                </Button>
            </Grid>


            <local:HeaderUserControl Grid.Column="1" 
                    Button1Text="{Binding BasicService.OrdersService.Order.Loaded.OrderNr}"
                    Button1Image="pack://application:,,,/Assets/Images/Orders.png"
                    Button1Visibility="True"                    
                    
                    Button2Text="{Binding BasicService.ProductsService.Product.Loaded.Name}"
                    Button2Image="pack://application:,,,/Assets/Images/Products.png"
                    Button2Visibility="True"         
                    Button2Command="{Binding cmdChangePageToProductDetailViewCommand}"
                    
                    Button3TextLeft="{Binding BasicService.UsersService.Login.ActualUser.User}"
                    Button3TextRight="{Binding BasicService.UsersService.Login.ActualUser.Level, StringFormat='( {0} )'}"                  
                    Button3Image="pack://application:,,,/Assets/Images/User.png"
                    Button3Visibility="True"
                    Button3TextVisibility="{Binding BasicService.UsersService.Login.ActualUser.User, Converter={StaticResource ConverterStringToVisibilityEmptyStringHidden}, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                    Button3Command="{Binding cmdChangePageToUsersLoginLogoutViewCommand}"
                    
                    Button4Text="{Binding BasicService.ProductGroupsService.ProductGroup.Loaded.Name}"
                    Button4Image="pack://application:,,,/Assets/Images/Productgroups.png"
                    Button4Visibility="True"                    
                    
                    Button5Text="{Binding BasicService.OrdersService.Order.Loaded.Amount}"
                    Button5Image="pack://application:,,,/Assets/Images/Recipes.png"
                    Button5Visibility="True"                    
                    
                    Button6Text="{Binding GlobalService.Clock}"
                    Button6Image="pack://application:,,,/Assets/Images/Clock.png"
                    Button6Visibility="True"                    
                    
                    />

        </Grid>

        <Grid x:Name="gridBody" Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <ui:NavigationView Grid.Column="0" ScrollViewer.CanContentScroll="False"
           x:Name="NavigationView01" 
           Padding="10,0,0,0"                     
           BreadcrumbBar="{Binding ElementName=BreadcrumbBar}" 
           FooterMenuItemsSource="{Binding ViewModel.FooterMenuItems, Mode=OneWay}"
           FrameMargin="0" 
           IsBackButtonVisible="Collapsed"
                        
           IsPaneToggleVisible="True"
           MenuItemsSource="{Binding ViewModel.MenuItems, Mode=OneWay}"             
           OpenPaneLength="230"
           PaneDisplayMode="Left"
           Grid.ColumnSpan="2">
                <ui:NavigationView.Header>
                    
                    <Grid Margin="10">

                      

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>


                        <ui:BreadcrumbBar  Grid.Row="0"  x:Name="BreadcrumbBar"  />
                        

                    </Grid>
                </ui:NavigationView.Header>

            </ui:NavigationView>

            <!--<ContentPresenter Grid.Column="1" x:Name="RootContentDialog" />-->
        </Grid>

    </Grid>
    

</ui:FluentWindow>
